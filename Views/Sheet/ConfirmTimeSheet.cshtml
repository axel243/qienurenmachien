@model TimeSheetViewModel;
@using Newtonsoft.Json.Linq;
@using QienUrenMachien.Translation;
@{
    ViewData["Title"] = "Urenformulier";
}

<h1>Urenformulier van gebruiker</h1>

<table style="width:100%;">
    <tr>
        <th>Gebruiker</th>
        <th>Project</th>
        <th>Maand</th>
        <th>Projecturen</th>
        <th>Overwerk</th>
        <th>Ziek</th>
        <th>Afwezig</th>
        <th>Training</th>
        <th>Overige</th>
        <th>Ingeleverd</th>
        <th>Goedgekeurd</th>
    </tr>
    <tr>
        <td>@Model.UserName</td>
        <td>@Model.Project</td>
        <td>@Model.Month</td>
        <td>@Model.ProjectHours</td>
        <td>@Model.Overwork</td>
        <td>@Model.Sick</td>
        <td>@Model.Absence</td>
        <td>@Model.Training</td>
        <td>@Model.Other</td>
        <td>@Model.Submitted</td>
        <td>@Model.Approved</td>
    </tr>
</table>

<br>
<table id="TimeSheetTable" style="width:100%;">
	<tr>
		<th>Dag</th>
		<th>Projecturen</th>
		<th>Overwerk</th>
		<th>Ziek</th>
		<th>Afwezig</th>
		<th>Training</th>
		<th>Overige</th>
	</tr>

    @foreach (var day in JObject.Parse(Model.Data))
    {
        DateTime dt = new DateTime(Model.theDate.Year, Model.theDate.Month, Convert.ToInt32(day.Key));
        @if (dt.ToString("dddd") == "Saturday" || dt.ToString("dddd") == "Sunday")
        {
            <tr style="background-color: #f3f3f3">
                <td>@Translator.TranslateDay(dt.ToString("dddd")) @day.Key</td>
                <td>@day.Value["projecthours"]</td>
                <td>@day.Value["overwork"]</td>
                <td>@day.Value["sick"]</td>
                <td>@day.Value["absence"]</td>
                <td>@day.Value["training"]</td>
                <td>@day.Value["other"]</td>
            </tr>
        }
        else
        {
            <tr>
                <td>@dt.ToString("dddd") @day.Key</td>
                <td>@day.Value["projecthours"]</td>
                <td>@day.Value["overwork"]</td>
                <td>@day.Value["sick"]</td>
                <td>@day.Value["absence"]</td>
                <td>@day.Value["training"]</td>
                <td>@day.Value["other"]</td>
            </tr>
        }
    }
</table>

@*@if (Model.Approved == "Approved")
{
    <p>Timesheet is al goedgekeurd.</p>
}
else
{
    *@<div class="form-group row">
        <div class="col-sm-10">
            <a class="btn btn-primary" asp-action="ApproveTimeSheet"
               asp-controller="Sheet" asp-route-id="@Model.SheetID">Goedkeuren</a>
            <a class="btn btn-primary" asp-action="RejectTimeSheet"
               asp-controller="Sheet" asp-route-id="@Model.SheetID">Afkeuren</a>
        </div>
    </div>
@*}*@

